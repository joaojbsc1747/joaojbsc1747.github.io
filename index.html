<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Arbitragem</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #0b0f14;
  color: #e5e7eb;
  margin: 0;
}

header {
  background: #0f5132;
  color: #e5e7eb;
  padding: 20px;
  text-align: center;
}

main {
  max-width: 1100px;
  margin: 20px auto;
  background: #111827;
  padding: 20px;
  border-radius: 12px;
}

label {
  font-weight: bold;
  margin-bottom: 6px;
  display: block;
  color: #d1d5db;
}

.input-total {
  display: flex;
  align-items: center;
  gap: 10px;
}

.input-total span {
  font-size: 30px;
  font-weight: bold;
  color: #22c55e;
}

.input-total input {
  font-size: 22px;
}

input {
  width: 100%;
  padding: 12px;
  border-radius: 8px;
  border: 1px solid #374151;
  background: #020617;
  color: #e5e7eb;
}

input::placeholder {
  color: #6b7280;
}

.lucro-box {
  margin-top: 16px;
  padding: 16px;
  border-radius: 10px;
  font-size: 22px;
  font-weight: bold;
  text-align: center;
}

.lucro-positivo {
  background: rgba(34,197,94,0.15);
  color: #22c55e;
}

.lucro-negativo {
  background: rgba(239,68,68,0.15);
  color: #ef4444;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 22px;
}

th, td {
  border: 1px solid #1f2933;
  padding: 10px;
  text-align: center;
}

th {
  background: #020617;
  color: #22c55e;
  font-weight: bold;
}

tr {
  background: #020617;
}

button {
  margin-top: 18px;
  padding: 14px;
  width: 100%;
  border-radius: 10px;
  border: none;
  background: #22c55e;
  color: #022c22;
  font-size: 17px;
  font-weight: bold;
  cursor: pointer;
}

button:hover {
  background: #16a34a;
}

@media (max-width: 768px) {
  table, thead, tbody, th, td, tr {
    display: block;
  }
  thead {
    display: none;
  }
  tr {
    border: 1px solid #1f2937;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 12px;
  }
}
</style>
</head>

<body>
<header>
  <h1>Calculadora de Arbitragem</h1>
  <p>Trade esportivo • retorno igual em qualquer resultado</p>
</header>

<main>
  <label>Total Investido</label>
  <div class="input-total">
    <span>R$</span>
    <input id="total" placeholder="0,00" oninput="formatMoney(this); calcular()">
  </div>

  <div id="lucroBox" class="lucro-box" style="display:none;"></div>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Odd</th>
        <th>Investimento por Odd</th>
        <th>Retorno</th>
      </tr>
    </thead>
    <tbody id="tabela"></tbody>
  </table>

  <button onclick="addOdd()">➕ Adicionar odd</button>
</main>

<script>
const tabela = document.getElementById("tabela");
const lucroBox = document.getElementById("lucroBox");

const br = new Intl.NumberFormat("pt-BR", {
  style: "currency",
  currency: "BRL"
});

function formatMoney(input) {
  let v = input.value.replace(/\D/g, "");
  if (!v) { input.value = ""; return; }
  input.value = (v / 100).toLocaleString("pt-BR", {
    minimumFractionDigits: 2
  });
}

function formatOdd(input) {
  let v = input.value.replace(/\D/g, "");
  if (!v) { input.value = ""; return; }
  input.value = (v / 100).toFixed(2);
}

function addOdd() {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td class="idx"></td>
    <td><input placeholder="0,00" oninput="formatOdd(this); calcular()"></td>
    <td class="invest">-</td>
    <td class="retorno">-</td>
  `;
  tabela.appendChild(tr);
  atualizarIndices();
}

/* 3 odds iniciais */
addOdd();
addOdd();
addOdd();

function atualizarIndices() {
  [...tabela.querySelectorAll("tr")].forEach((tr, i) => {
    tr.querySelector(".idx").innerText = (i + 1) + "º";
  });
}

function calcular() {
  const totalInput = document.getElementById("total").value;
  if (!totalInput) return;

  const total = parseFloat(
    totalInput.replace(/\./g, "").replace(",", ".")
  );
  if (total <= 0) return;

  const rows = [...tabela.querySelectorAll("tr")];
  const odds = [];

  rows.forEach(row => {
    const oddInput = row.querySelector("input").value;
    const odd = parseFloat(oddInput.replace(",", "."));
    if (odd && odd > 1) odds.push({ row, odd });
  });

  if (odds.length === 0) return;

  const soma = odds.reduce((acc, o) => acc + (1 / o.odd), 0);
  const retornoComum = total / soma;
  const lucro = retornoComum - total;

  odds.forEach(o => {
    const investimento = retornoComum / o.odd;
    o.row.querySelector(".invest").innerText = br.format(investimento);
    o.row.querySelector(".retorno").innerText = br.format(retornoComum);
  });

  lucroBox.style.display = "block";
  lucroBox.innerText = `Lucro Total: ${br.format(lucro)}`;
  lucroBox.className = lucro >= 0
    ? "lucro-box lucro-positivo"
    : "lucro-box lucro-negativo";
}
</script>
</body>
</html>
