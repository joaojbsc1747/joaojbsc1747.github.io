<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Calculadora de Arbitragem</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f5f5f5;
  margin: 0;
}
header {
  background: #0f172a;
  color: white;
  padding: 20px;
  text-align: center;
}
main {
  max-width: 1100px;
  margin: 20px auto;
  background: white;
  padding: 20px;
  border-radius: 10px;
}
label {
  font-weight: bold;
  margin-bottom: 6px;
  display: block;
}
.input-total {
  display: flex;
  align-items: center;
  gap: 10px;
}
.input-total span {
  font-size: 28px;
  font-weight: bold;
}
.input-total input {
  font-size: 22px;
}
input {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

.lucro-box {
  margin-top: 15px;
  padding: 15px;
  border-radius: 8px;
  font-size: 22px;
  font-weight: bold;
  text-align: center;
}
.lucro-positivo { background: #dcfce7; color: #166534; }
.lucro-negativo { background: #fee2e2; color: #991b1b; }

table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 20px;
}
th, td {
  border: 1px solid #e5e7eb;
  padding: 8px;
  text-align: center;
}
th {
  background: #f1f5f9;
}

button {
  margin-top: 15px;
  padding: 12px;
  width: 100%;
  border-radius: 8px;
  border: none;
  background: #16a34a;
  color: white;
  font-size: 16px;
  cursor: pointer;
}

@media (max-width: 768px) {
  table, thead, tbody, th, td, tr { display: block; }
  thead { display: none; }
  tr {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 10px;
  }
}
</style>
</head>

<body>
<header>
  <h1>Calculadora de Arbitragem</h1>
  <p>Trade / Surebet – retorno igual em qualquer resultado</p>
</header>

<main>
  <label>Total Investido</label>
  <div class="input-total">
    <span>R$</span>
    <input id="total" placeholder="0,00" oninput="formatMoney(this); calcular()">
  </div>

  <div id="lucroBox" class="lucro-box" style="display:none;"></div>

  <table>
    <thead>
      <tr>
        <th>#</th>
        <th>Odd</th>
        <th>Investimento por Odd</th>
        <th>Retorno</th>
      </tr>
    </thead>
    <tbody id="tabela"></tbody>
  </table>

  <button onclick="addOdd()">➕ Adicionar odd</button>
</main>

<script>
const tabela = document.getElementById("tabela");
const lucroBox = document.getElementById("lucroBox");
const br = new Intl.NumberFormat("pt-BR", {
  style: "currency",
  currency: "BRL"
});

function formatMoney(input) {
  let v = input.value.replace(/\D/g, "");
  if (!v) { input.value = ""; return; }
  input.value = (v / 100).toLocaleString("pt-BR", { minimumFractionDigits: 2 });
}

function formatOdd(input) {
  let v = input.value.replace(/\D/g, "");
  if (!v) { input.value = ""; return; }
  input.value = (v / 100).toFixed(2);
}

function addOdd() {
  const tr = document.createElement("tr");
  tr.innerHTML = `
    <td class="idx"></td>
    <td><input placeholder="0,00" oninput="formatOdd(this); calcular()"></td>
    <td class="invest">-</td>
    <td class="retorno">-</td>
  `;
  tabela.appendChild(tr);
  atualizarIndices();
}

/* 3 odds padrão */
addOdd();
addOdd();
addOdd();

function atualizarIndices() {
  [...tabela.querySelectorAll("tr")].forEach((tr, i) => {
    tr.querySelector(".idx").innerText = (i + 1) + "º";
  });
}

function calcular() {
  const totalInput = document.getElementById("total").value;
  if (!totalInput) return;

  const total = parseFloat(totalInput.replace(/\./g, "").replace(",", "."));
  if (total <= 0) return;

  const rows = [...tabela.querySelectorAll("tr")];
  const odds = [];

  rows.forEach(row => {
    const oddInput = row.querySelector("input").value;
    const odd = parseFloat(oddInput.replace(",", "."));
    if (odd && odd > 1) odds.push({ row, odd });
  });

  if (odds.length === 0) return;

  const soma = odds.reduce((acc, o) => acc + (1 / o.odd), 0);
  const retornoComum = total / soma;
  const lucro = retornoComum - total;

  odds.forEach(o => {
    const investimento = retornoComum / o.odd;
    o.row.querySelector(".invest").innerText = br.format(investimento);
    o.row.querySelector(".retorno").innerText = br.format(retornoComum);
  });

  lucroBox.style.display = "block";
  lucroBox.innerText = `Lucro Total: ${br.format(lucro)}`;
  lucroBox.className = lucro >= 0
    ? "lucro-box lucro-positivo"
    : "lucro-box lucro-negativo";
}
</script>
</body>
</html>
